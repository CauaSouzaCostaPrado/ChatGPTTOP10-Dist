import{A as x,_ as m,L as f,m as _,B as C}from"./responsiveObserve-1fa42986.js";import{B as se,A as ne,a as ae,b as ce,c as I,d as le,m as re}from"./AppFooter-4e213a0d.js";import{M as ie,B as N,C as M,S as de,T as ue,I as ge,p as me}from"./download-14470e56.js";import{E as pe}from"./index-09bf00aa.js";import{R as he}from"./row-b87f7dbc.js";import{r as s,j as u,a as t,F as g}from"./index-70c8ec31.js";var fe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.9 490.3c3.6-12 5.4-24.4 5.4-37 0-28.3-9.3-55.5-26.1-77.7 3.6-12 5.4-24.4 5.4-37 0-28.3-9.3-55.5-26.1-77.7 3.6-12 5.4-24.4 5.4-37 0-51.6-30.7-98.1-78.3-118.4a66.1 66.1 0 00-26.5-5.4H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h129.3l85.8 310.8C372.9 889 418.9 924 470.9 924c29.7 0 57.4-11.8 77.9-33.4 20.5-21.5 31-49.7 29.5-79.4l-6-122.9h239.9c12.1 0 23.9-3.2 34.3-9.3 40.4-23.5 65.5-66.1 65.5-111 0-28.3-9.3-55.5-26.1-77.7zM184 456V172h81v284h-81zm627.2 160.4H496.8l9.6 198.4c.6 11.9-4.7 23.1-14.6 30.5-6.1 4.5-13.6 6.8-21.1 6.7a44.28 44.28 0 01-42.2-32.3L329 459.2V172h415.4a56.85 56.85 0 0133.6 51.8c0 9.7-2.3 18.9-6.9 27.3l-13.9 25.4 21.9 19a56.76 56.76 0 0119.6 43c0 9.7-2.3 18.9-6.9 27.3l-13.9 25.4 21.9 19a56.76 56.76 0 0119.6 43c0 9.7-2.3 18.9-6.9 27.3l-14 25.5 21.9 19a56.76 56.76 0 0119.6 43c0 19.1-11 37.5-28.8 48.4z"}}]},name:"dislike",theme:"outlined"};const ve=fe;var b=function(a,c){return s.createElement(x,m(m({},a),{},{ref:c,icon:ve}))};b.displayName="DislikeOutlined";const Se=s.forwardRef(b);var Oe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.9 533.7c16.8-22.2 26.1-49.4 26.1-77.7 0-44.9-25.1-87.4-65.5-111.1a67.67 67.67 0 00-34.3-9.3H572.4l6-122.9c1.4-29.7-9.1-57.9-29.5-79.4A106.62 106.62 0 00471 99.9c-52 0-98 35-111.8 85.1l-85.9 311H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h601.3c9.2 0 18.2-1.8 26.5-5.4 47.6-20.3 78.3-66.8 78.3-118.4 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7-.2-12.6-2-25.1-5.6-37.1zM184 852V568h81v284h-81zm636.4-353l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 22.4-13.2 42.6-33.6 51.8H329V564.8l99.5-360.5a44.1 44.1 0 0142.2-32.3c7.6 0 15.1 2.2 21.1 6.7 9.9 7.4 15.2 18.6 14.6 30.5l-9.6 198.4h314.4C829 418.5 840 436.9 840 456c0 16.5-7.2 32.1-19.6 43z"}}]},name:"like",theme:"outlined"};const we=Oe;var A=function(a,c){return s.createElement(x,m(m({},a),{},{ref:c,icon:we}))};A.displayName="LikeOutlined";const ye=s.forwardRef(A),{Content:ke}=f,{Meta:T}=M,_e="menuToggle",Ce=(n,a)=>{switch(a.type){case _e:return{...n,menuToggle:!n.menuToggle};default:return n}},Ie=n=>{let a,c=JSON.parse(localStorage.getItem("user")).auth;return c?(a=n.filter(d=>d.auth&&d.auth.indexOf(c)!==-1),a):n},Le=n=>{console.log(n);const[a]=s.useState(e=>localStorage.getItem("user")?Ie(re):(n.history.push("/login"),[])),[c,d]=s.useState([]),[p,h]=s.useState(!0),[v,L]=s.useState(),[J,S]=s.useState(!1),[E,B]=s.useState(""),[H,j]=s.useState(""),[D,z]=s.useState(""),[r,R]=s.useState([]),[i,V]=s.useState([]),[O,$]=s.useReducer(Ce,{menuToggle:!1}),F=()=>{$({type:"menuToggle"})},P=()=>{S(!1)},U=()=>{localStorage.clear(),n.history.push("/login"),_.success("Success!")};s.useEffect(()=>{const e=localStorage.getItem("article_upvote_ids");e&&R(JSON.parse(e).ids);const o=localStorage.getItem("article_downvote_ids");o&&V(JSON.parse(o).ids)},[r,i]),s.useEffect(()=>{L(n.match.params.cate_slug),window.scrollTo({top:0,behavior:"smooth"})},[n]),s.useEffect(()=>{w()},[v]);const G=(e,o,l)=>{S(!0),B(e),j(o),z(l)};function K(e){let o="";return o=e.replaceAll(`
`,"<br>"),{__html:o}}const w=async()=>{try{const o=await(await fetch("http://184.168.20.18:5000/article",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:v})})).json();o&&(d(o.articles),h(!1))}catch{}},y=async(e,o,l)=>{const k=await fetch("http://184.168.20.18:5000/updateVote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,count:o,flag:l})});if(k.ok)h(!0),setTimeout(()=>{h(!1),w()},500),_.success("Updated!");else{const oe=await k.text();console.log(oe)}},Y=(e,o)=>{y(e,o,!0),i.indexOf(e)!=-1&&i.splice(i.indexOf(e),1),r.indexOf(e)==-1&&r.push(e),localStorage.setItem("article_upvote_ids",JSON.stringify({ids:r})),localStorage.setItem("article_downvote_ids",JSON.stringify({ids:i}))},Z=(e,o)=>{y(e,o,!1),r.indexOf(e)!=-1&&r.splice(r.indexOf(e),1),i.indexOf(e)==-1&&i.push(e),localStorage.setItem("article_upvote_ids",JSON.stringify({ids:r})),localStorage.setItem("article_downvote_ids",JSON.stringify({ids:i}))},q=(e,o)=>{const l=localStorage.getItem("article_upvote_ids")?JSON.parse(localStorage.getItem("article_upvote_ids")).ids:null;return t(g,{children:t(C,{disabled:l&&l.indexOf(o)!=-1,loading:p,onClick:()=>Y(o,e),shape:"circle",icon:t(ye,{})})})},Q=(e,o)=>{const l=localStorage.getItem("article_downvote_ids")?JSON.parse(localStorage.getItem("article_downvote_ids")).ids:null;return t(g,{children:t(C,{disabled:l&&l.indexOf(o)!=-1,loading:p,onClick:()=>Z(o,e),shape:"circle",icon:t(Se,{})})})},W=e=>t(N,{count:e,showZero:!0,color:"#001529"}),X=()=>t("span",{children:t(ue,{color:"blue",children:D})}),ee=e=>t(g,{children:t(ge,{width:200,height:200,src:e,fallback:me})}),te=()=>t(g,{children:t(pe,{description:"No Ideas Posted Yet!",style:{width:"100%",padding:"100px 0",backgroundColor:"white"}})});return u(f,{className:"app",children:[t(se,{}),t(ne,{menuToggle:O.menuToggle,menu:a}),u(f,{style:{minHeight:"100vh"},children:[t(ae,{menuToggle:O.menuToggle,menuClick:F,avatar:ce,loginOut:U}),u(ke,{className:"content",children:[t(ie,{title:H,open:J,footer:X(),width:800,onCancel:P,children:t("div",{style:{margin:"0 3rem"},dangerouslySetInnerHTML:K(E)})}),t(he,{gutter:[16,24],children:c.length!=0?c.map((e,o)=>t("div",{className:"badge-card",children:t(N.Ribbon,{text:e.keyword.length>25?e.keyword.slice(0,25)+"...":e.keyword,color:"volcano",children:t(M,{actions:[q(e.vote,e.id),W(e.vote),Q(e.vote,e.id)],children:u(de,{loading:p,avatar:!0,active:!0,children:[e.cate==I[I.length-1].value?t(T,{className:"meta-content image-content",description:ee(e.content)}):t(T,{className:"meta-content",description:e.content,onClick:()=>G(e.content,e.cate,e.keyword)}),t("span",{className:"date-card dir-right",children:e.createdAt})]})})})},o)):te()})]}),t(le,{})]})]})};export{Le as default};
